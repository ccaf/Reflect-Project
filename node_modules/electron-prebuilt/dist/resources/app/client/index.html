<!DOCTYPE html>
<html>
<head>
  <script src="../lib/mithril.min.js"></script>
  <script type="text/javascript">
    var conn = new WebSocket('ws://' + window.location.hostname + ':905/');
    conn.sendObj = function(channel, message) {
      conn.send(JSON.stringify({'channel': channel, 'message': message}));

    };

    conn.onopen = function() {
      conn.sendObj('action-list-clients')
    };

    var actionHandler = {
      'data-list-clients': function(message) {
        console.log(message);
      }
    };

    conn.onmessage = function(json) {
      var message = JSON.parse(json.data);
      if (message.channel in actionHandler) actionHandler[message.channel](message);
    };

  </script>
</head>
<body>
<div id="log">

</div>
</body>
</html>
